--과제 : 부서명, 부서별 인원수, 월급합계 ->
DECLARE
    VS_NAME DEPARTMENTS.DEPARTMENT_NAME%TYPE;
    VS_DID EMPLOYEES.DEPARTMENT_ID%TYPE;
    VS_COUNT NUMBER;
    VS_SUM NUMBER;
    CURSOR A1
    IS
        SELECT B.DEPARTMENT_NAME, A.DEPARTMENT_ID, COUNT(A.DEPARTMENT_ID), SUM(A.SALARY) 
            FROM EMPLOYEES A, DEPARTMENTS B 
            WHERE A.DEPARTMENT_ID = B.DEPARTMENT_ID
            GROUP BY B.DEPARTMENT_NAME, A.DEPARTMENT_ID
            ORDER BY A.DEPARTMENT_ID;
BEGIN
    OPEN A1;
    LOOP
        FETCH A1 INTO VS_NAME, VS_DID, VS_COUNT, VS_SUM;
        EXIT WHEN A1%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE('부서명 : ['||VS_NAME||']  부서코드 : ['||VS_DID||']  인원수 : ['||VS_COUNT||'명]  월급 합계 : ['||VS_SUM||']');
    END LOOP;
    CLOSE A1;
END;
/


SELECT B.DEPARTMENT_NAME, A.DEPARTMENT_ID, COUNT(A.DEPARTMENT_ID), SUM(A.SALARY) 
            FROM EMPLOYEES A, DEPARTMENTS B 
            WHERE A.DEPARTMENT_ID = B.DEPARTMENT_ID
            GROUP BY B.DEPARTMENT_NAME, A.DEPARTMENT_ID
            ORDER BY A.DEPARTMENT_ID;
        